# C语言控制结构使用场景总结

## 目录
- [for循环](#for循环)
- [while循环](#while循环)
- [do-while循环](#do-while循环)
- [if条件判断](#if条件判断)
- [选择指南](#选择指南)

---

## for循环

### 定义
```c
for(初始化; 条件判断; 更新表达式)
{
    // 循环体
}
```

### 使用场景
✅ **已知循环次数**的情况

### 典型应用

#### 1. 固定次数循环
```c
// 打印10次
for(int i = 0; i < 10; i++)
{
    printf("第%d次\n", i + 1);
}
```

#### 2. 遍历数组
```c
int arr[5] = {1, 2, 3, 4, 5};
for(int i = 0; i < 5; i++)
{
    printf("%d ", arr[i]);
}
```

#### 3. 表格/矩阵处理
```c
// 打印九九乘法表
for(int i = 1; i <= 9; i++)
{
    for(int j = 1; j <= i; j++)
    {
        printf("%d×%d=%d\t", j, i, i*j);
    }
    printf("\n");
}
```

#### 4. 固定步长遍历
```c
// 只处理偶数
for(int i = 0; i < 20; i += 2)
{
    printf("%d ", i);
}
```

#### 5. 倒序遍历
```c
// 倒计时
for(int i = 10; i >= 0; i--)
{
    printf("%d ", i);
}
```

### 优点
- 代码紧凑，初始化、条件、更新都在一行
- 适合计数型循环，逻辑清晰
- 循环变量作用域明确

### 注意事项
- 避免在循环体内修改循环变量导致逻辑混乱
- 注意边界条件（`<` vs `<=`）

---

## while循环

### 定义
```c
while(条件)
{
    // 循环体
}
```

### 使用场景
✅ **循环次数不确定**，但有明确的**结束条件**

### 典型应用

#### 1. 条件驱动的循环
```c
// 输入验证
int password;
printf("请输入密码：");
scanf("%d", &password);

while(password != 1234)
{
    printf("密码错误，请重新输入：");
    scanf("%d", &password);
}
printf("密码正确！\n");
```

#### 2. 读取文件直到结束
```c
char ch;
FILE *fp = fopen("data.txt", "r");
while((ch = fgetc(fp)) != EOF)
{
    printf("%c", ch);
}
fclose(fp);
```

#### 3. 游戏主循环
```c
int gameRunning = 1;
while(gameRunning)
{
    // 处理输入
    // 更新游戏状态
    // 渲染画面
    
    if(/* 退出条件 */)
    {
        gameRunning = 0;
    }
}
```

#### 4. 等待特定事件
```c
int ready = 0;
while(!ready)
{
    printf("准备好了吗？(1-是, 0-否): ");
    scanf("%d", &ready);
}
```

#### 5. 处理链表
```c
struct Node* current = head;
while(current != NULL)
{
    printf("%d ", current->data);
    current = current->next;
}
```

### 优点
- 逻辑灵活，适合复杂的终止条件
- 代码更接近自然语言描述
- 适合"不知道循环多少次，但知道什么时候停止"的场景

### 注意事项
- **死循环风险**：必须确保条件最终会变为假
- 记得在循环体内更新条件相关的变量

---

## do-while循环

### 定义
```c
do
{
    // 循环体
} while(条件);
```

### 使用场景
✅ **至少执行一次**，然后根据条件决定是否继续

### 典型应用

#### 1. 菜单系统（最常见）
```c
int choice;
do
{
    printf("\n====== 菜单 ======\n");
    printf("1. 新建\n");
    printf("2. 打开\n");
    printf("3. 保存\n");
    printf("0. 退出\n");
    printf("请选择：");
    scanf("%d", &choice);
    
    switch(choice)
    {
        case 1: /* 新建 */ break;
        case 2: /* 打开 */ break;
        case 3: /* 保存 */ break;
        case 0: printf("再见！\n"); break;
        default: printf("无效选择！\n");
    }
} while(choice != 0);
```

#### 2. 输入验证（保证至少执行一次）
```c
int age;
do
{
    printf("请输入年龄(1-120): ");
    scanf("%d", &age);
    
    if(age < 1 || age > 120)
    {
        printf("年龄无效，请重新输入！\n");
    }
} while(age < 1 || age > 120);
```

#### 3. 重试机制
```c
int success = 0;
int attempts = 0;
do
{
    attempts++;
    success = tryConnect(); // 尝试连接
    
    if(!success)
    {
        printf("连接失败，重试中...\n");
        sleep(1);
    }
} while(!success && attempts < 3);
```

#### 4. 游戏"再来一局"
```c
char playAgain;
do
{
    playGame(); // 玩游戏
    
    printf("再来一局？(y/n): ");
    scanf(" %c", &playAgain);
} while(playAgain == 'y' || playAgain == 'Y');
```

### 优点
- **保证至少执行一次**，适合菜单、输入验证等场景
- 避免了先执行再判断的重复代码

### 注意事项
- 使用较少，很多场景可以用while代替
- 条件判断在最后，容易被忽视

### do-while vs while
```c
// while：可能一次都不执行
int count = 0;
while(count < 0)  // 条件为假，不执行
{
    printf("不会打印\n");
}

// do-while：至少执行一次
int count = 0;
do
{
    printf("会打印一次\n");  // 即使条件为假，也会先执行
} while(count < 0);
```

---

## if条件判断

### 定义
```c
// 单分支
if(条件)
{
    // 条件为真时执行
}

// 双分支
if(条件)
{
    // 条件为真时执行
}
else
{
    // 条件为假时执行
}

// 多分支
if(条件1)
{
    // 条件1为真
}
else if(条件2)
{
    // 条件2为真
}
else
{
    // 所有条件都为假
}
```

### 使用场景
✅ **根据条件执行不同的代码**，不涉及重复执行

### 典型应用

#### 1. 简单条件判断
```c
int age = 18;
if(age >= 18)
{
    printf("成年人\n");
}
else
{
    printf("未成年人\n");
}
```

#### 2. 多条件分支
```c
int score = 85;
if(score >= 90)
{
    printf("优秀\n");
}
else if(score >= 80)
{
    printf("良好\n");
}
else if(score >= 60)
{
    printf("及格\n");
}
else
{
    printf("不及格\n");
}
```

#### 3. 输入验证
```c
int num;
printf("请输入一个正数：");
scanf("%d", &num);

if(num <= 0)
{
    printf("错误：必须是正数！\n");
    return -1;
}
```

#### 4. 逻辑组合判断
```c
int x = 5, y = 10;
if(x > 0 && y > 0)
{
    printf("都是正数\n");
}

if(x == 0 || y == 0)
{
    printf("至少有一个是0\n");
}
```

#### 5. 嵌套判断
```c
int age = 20;
int hasLicense = 1;

if(age >= 18)
{
    if(hasLicense)
    {
        printf("可以驾驶\n");
    }
    else
    {
        printf("需要驾照\n");
    }
}
else
{
    printf("年龄不够\n");
}
```

#### 6. 三元运算符（简化的if-else）
```c
int a = 10, b = 20;
int max = (a > b) ? a : b;  // 等价于if-else
printf("最大值：%d\n", max);
```

### 优点
- 逻辑清晰，易于理解
- 适合一次性的条件判断
- 可以嵌套处理复杂逻辑

### 注意事项
- 避免过深的嵌套（超过3层），考虑使用switch或提取函数
- 注意`=`（赋值）和`==`（比较）的区别
- 单条语句也建议使用`{}`，避免逻辑错误

---

## 选择指南

### 流程图

```
需要根据条件执行不同操作？
    ├─ 是 → 需要重复执行？
    │         ├─ 是 → 循环类型
    │         │       ├─ 知道循环次数？ → 【for循环】
    │         │       ├─ 不知道次数但知道停止条件？ → 【while循环】
    │         │       └─ 必须先执行一次？ → 【do-while循环】
    │         └─ 否 → 【if判断】
    └─ 否 → 顺序执行
```

### 对比表格

| 结构 | 执行次数 | 典型场景 | 关键特点 | 使用频率 |
|------|----------|----------|----------|----------|
| **for** | 多次（已知） | 数组遍历、计数循环 | 紧凑、清晰 | ⭐⭐⭐⭐⭐ |
| **while** | 多次（未知） | 条件驱动、文件读取 | 灵活、条件前置 | ⭐⭐⭐⭐ |
| **do-while** | 至少1次 | 菜单、输入验证 | 先执行后判断 | ⭐⭐ |
| **if** | 0或1次 | 条件判断、分支选择 | 简单直观 | ⭐⭐⭐⭐⭐ |

### 实战选择建议

#### 什么时候用for？
- ✅ 遍历数组：`for(int i = 0; i < n; i++)`
- ✅ 固定次数操作：`for(int i = 0; i < 100; i++)`
- ✅ 计数器明确：循环10次、50次等

#### 什么时候用while？
- ✅ 读取文件到结束：`while(!feof(fp))`
- ✅ 等待用户输入：`while(input != 'q')`
- ✅ 游戏主循环：`while(gameRunning)`
- ✅ 不确定循环次数，但知道什么时候停

#### 什么时候用do-while？
- ✅ 菜单系统：至少显示一次菜单
- ✅ 输入验证：至少要求输入一次
- ✅ "再来一次"功能：游戏重玩、重试等

#### 什么时候用if？
- ✅ 一次性判断：检查输入是否合法
- ✅ 条件分支：根据情况执行不同操作
- ✅ 错误处理：`if(error) return -1;`

---

## 常见组合使用

### 1. for + if：筛选遍历
```c
// 打印数组中的偶数
int arr[10] = {1,2,3,4,5,6,7,8,9,10};
for(int i = 0; i < 10; i++)
{
    if(arr[i] % 2 == 0)  // 条件筛选
    {
        printf("%d ", arr[i]);
    }
}
```

### 2. while + if：条件驱动处理
```c
// 处理用户输入
char ch;
while((ch = getchar()) != 'q')  // 循环直到按q
{
    if(ch >= 'a' && ch <= 'z')  // 判断是否小写字母
    {
        printf("%c是小写字母\n", ch);
    }
}
```

### 3. do-while + switch：菜单系统（最经典）
```c
int choice;
do
{
    printf("1.选项A  2.选项B  0.退出\n");
    scanf("%d", &choice);
    
    switch(choice)
    {
        case 1: /* 处理A */ break;
        case 2: /* 处理B */ break;
    }
} while(choice != 0);
```

---

## 练习题

### 题目1：打印斐波那契数列前20项
提示：使用for循环

### 题目2：猜数字游戏
提示：使用while循环，随机数1-100，猜对为止

### 题目3：学生成绩管理菜单
提示：使用do-while + switch

### 题目4：判断闰年
提示：使用if判断（能被4整除但不能被100整除，或能被400整除）

---

## 总结

- **for**：知道循环几次 → 遍历、计数
- **while**：不知道循环几次，但知道何时停 → 条件驱动
- **do-while**：至少执行一次 → 菜单、验证
- **if**：不循环，只判断一次 → 条件分支

**记住**：选择哪个结构取决于**执行次数**和**何时判断条件**！



